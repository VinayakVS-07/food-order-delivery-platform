<ng-container *ngIf="userRole === 'Admin'; else customerHeader">
  <app-admin-header></app-admin-header>
</ng-container>

<ng-template #customerHeader>
  <app-customer-header></app-customer-header>
</ng-template>
 
<div class="account-container" [class.admin-view]="userRole === 'Admin'">

  <div class="profile-card">
    <div class="profile-header">
      <div class="profile-avatar">
        <!-- ✅ Show profile image if available, else initials -->
        <ng-container *ngIf="profileImagePreview; else initialsAvatar">
          <img
            [src]="profileImagePreview"
            alt="Profile picture"
            class="profile-avatar-img"
          />
        </ng-container>

        <ng-template #initialsAvatar>
          <span>{{ user?.firstName?.charAt(0) }}{{ user?.lastName?.charAt(0) }}</span>
        </ng-template>

        <!-- ✅ Upload button (only visible in edit mode) -->
        <label *ngIf="editMode" class="profile-avatar-upload">
          <span class="material-icons upload-icon">photo_camera</span>
          <input
            type="file"
            accept="image/*"
            (change)="onProfileImageSelected($event)"
            hidden
          />
        </label>
      </div>

      <div class="profile-info">
        <h3>{{ user?.firstName }} {{ user?.lastName }}</h3>
        <p>{{ user?.email }}</p>
      </div>

      <button
        class="icon-btn"
        *ngIf="!editMode"
        (click)="enableEdit()"
        matTooltip="Edit Profile"
      >
        <span class="material-icons">edit</span>
      </button>
    </div>

    <form [formGroup]="profileForm" class="profile-form">
      <div class="form-grid">
        <div>
          <label>First Name</label>
          <input formControlName="firstName" [readonly]="!editMode" />
        </div>
        <div>
          <label>Last Name</label>
          <input formControlName="lastName" [readonly]="!editMode" />
        </div>
        <div>
          <label>Email</label>
          <input formControlName="email" readonly />
        </div>
        <div>
          <label>Phone</label>
          <input formControlName="phone" [readonly]="!editMode" />
        </div>
        <div>
          <label>Registered On</label>
          <input formControlName="registeredDate" readonly />
        </div>
      </div>

      <div class="btn-row" *ngIf="editMode">
        <button class="btn-secondary" (click)="cancelEdit()">Cancel</button>
        <button class="btn-save" (click)="saveChanges()">Save Changes</button>
      </div>
    </form>
  </div>

  <div class="password-card">
    <h3>Security</h3>
    <p>
      Keep your account secure by updating your password regularly.
      <button class="btn-secondary" (click)="openChangePasswordDialog()">
        Change Password
      </button>
    </p>
  </div>
</div>
